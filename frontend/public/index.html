<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MoodSync - Spotify + Quotes</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-500 to-pink-500 flex flex-col items-center p-6">

  <!-- Header -->
  <h1 class="text-4xl md:text-5xl font-bold text-white mt-6 mb-3">MoodSync</h1>
  <p class="text-lg md:text-xl text-white/90 mb-8">
    Discover music ðŸŽ¶ and quotes âœ¨ that match your mood.
  </p>

  <!-- Mood Buttons -->
  <h2 class="text-2xl font-semibold text-white mb-6">How are you feeling today?</h2>
  <div class="flex flex-wrap justify-center gap-4 mb-10">
    <button class="mood-btn bg-white/10 hover:bg-white/20 p-4 rounded-xl shadow-md flex flex-col items-center text-white w-28" data-mood="happy">
      <span class="text-3xl">ðŸ˜Š</span>
      <span class="mt-2 font-semibold">Happy</span>
    </button>
    <button class="mood-btn bg-white/10 hover:bg-white/20 p-4 rounded-xl shadow-md flex flex-col items-center text-white w-28" data-mood="sad">
      <span class="text-3xl">ðŸ˜¢</span>
      <span class="mt-2 font-semibold">Sad</span>
    </button>
    <button class="mood-btn bg-white/10 hover:bg-white/20 p-4 rounded-xl shadow-md flex flex-col items-center text-white w-28" data-mood="stressed">
      <span class="text-3xl">ðŸ˜°</span>
      <span class="mt-2 font-semibold">Stressed</span>
    </button>
    <button class="mood-btn bg-white/10 hover:bg-white/20 p-4 rounded-xl shadow-md flex flex-col items-center text-white w-28" data-mood="excited">
      <span class="text-3xl">ðŸ¤©</span>
      <span class="mt-2 font-semibold">Excited</span>
    </button>
    <button class="mood-btn bg-white/10 hover:bg-white/20 p-4 rounded-xl shadow-md flex flex-col items-center text-white w-28" data-mood="calm">
      <span class="text-3xl">ðŸ˜Œ</span>
      <span class="mt-2 font-semibold">Calm</span>
    </button>
    <button class="mood-btn bg-white/10 hover:bg-white/20 p-4 rounded-xl shadow-md flex flex-col items-center text-white w-28" data-mood="motivated">
      <span class="text-3xl">ðŸ’ª</span>
      <span class="mt-2 font-semibold">Motivated</span>
    </button>
  </div>

  <!-- Results Section -->
  <div id="results" class="w-full max-w-xl space-y-4"></div>

  <script>
    const resultsContainer = document.getElementById("results");
    const moodButtons = document.querySelectorAll(".mood-btn");

    // Quotes database
    const quotes = {
      happy: [
        { text: "Happiness is a journey, not a destination.", author: "Buddha" },
        { text: "Smile, and the world smiles with you.", author: "Stanley Gordon West" },
        { text: "Count your age by friends, not years.", author: "John Lennon" }
      ],
      sad: [
        { text: "Tears come from the heart, not the brain.", author: "Leonardo da Vinci" },
        { text: "Every storm runs out of rain.", author: "Maya Angelou" },
        { text: "Sadness flies away on the wings of time.", author: "Jean de La Fontaine" }
      ],
      stressed: [
        { text: "Almost everything will work again if you unplug it for a few minutes, including you.", author: "Anne Lamott" },
        { text: "Give yourself a break. You deserve it.", author: "Unknown" },
        { text: "Calm mind brings inner strength.", author: "Dalai Lama" }
      ],
      excited: [
        { text: "Do more things that make you forget to check your phone.", author: "Unknown" },
        { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
        { text: "Energy and persistence conquer all things.", author: "Benjamin Franklin" }
      ],
      calm: [
        { text: "Peace comes from within. Do not seek it without.", author: "Buddha" },
        { text: "Slow down and everything you are chasing will come around and catch you.", author: "John De Paola" },
        { text: "Serenity is not freedom from the storm, but peace amid the storm.", author: "Unknown" }
      ],
      motivated: [
        { text: "Push yourself, because no one else is going to do it for you.", author: "Unknown" },
        { text: "Donâ€™t watch the clock; do what it does. Keep going.", author: "Sam Levenson" },
        { text: "Great things never come from comfort zones.", author: "Anonymous" }
      ]
    };

    async function getAccessToken() {
      const clientId = "40e5727292cd48f88ff710dd20c0180d";  // Replace with your Client ID
      const clientSecret = "3142701771214e7dbdf28d3da3fb3ce9";  // Replace with your Client Secret

      const response = await fetch("https://accounts.spotify.com/api/token", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded",
          "Authorization": "Basic " + btoa(clientId + ":" + clientSecret),
        },
        body: "grant_type=client_credentials",
      });

      if (!response.ok) {
        resultsContainer.innerHTML = `<p class="text-red-200 text-center">Error getting Spotify token. Check Client ID/Secret.</p>`;
        throw new Error("Failed to get access token");
      }

      const data = await response.json();
      return data.access_token;
    }

    async function getSongsByMood(token, mood) {
      const query = encodeURIComponent(mood + " music");
      const response = await fetch(
        `https://api.spotify.com/v1/search?q=${query}&type=track&limit=20`,
        { headers: { Authorization: `Bearer ${token}` } }
      );

      if (!response.ok) {
        resultsContainer.innerHTML = `<p class="text-red-200 text-center">Failed to fetch songs.</p>`;
        return [];
      }

      const data = await response.json();
      return data.tracks.items.map(track => ({
        title: track.name,
        artist: track.artists.map(a => a.name).join(", "),
        url: track.external_urls.spotify,
        image: track.album.images[0]?.url || ""
      }));
    }

    async function showSongs(mood) {
      resultsContainer.innerHTML = `<p class="text-white text-center">Loading...</p>`;
      try {
        const token = await getAccessToken();
        const songs = await getSongsByMood(token, mood);
        resultsContainer.innerHTML = "";

        const heading = document.createElement("h3");
        heading.className = "text-xl font-bold text-white text-center mb-4";
        heading.textContent = `ðŸŽ¶ Recommended for ${mood.toUpperCase()}`;
        resultsContainer.appendChild(heading);

        songs.forEach(song => {
          const songCard = document.createElement("div");
          songCard.className =
            "bg-white/10 p-4 rounded-xl shadow-md text-white flex justify-between items-center gap-4";
          songCard.innerHTML = `
            <img src="${song.image}" class="w-12 h-12 rounded-lg">
            <div class="flex-1">
              <p class="text-lg font-semibold">${song.title}</p>
              <p class="text-sm text-white/80">by ${song.artist}</p>
            </div>
            <a href="${song.url}" target="_blank"
               class="px-3 py-2 bg-green-500 hover:bg-green-600 rounded-lg transition">
              Listen
            </a>
          `;
          resultsContainer.appendChild(songCard);
        });

        // Add random quote for mood
        const randomQuote = quotes[mood][Math.floor(Math.random() * quotes[mood].length)];
        const quoteCard = document.createElement("div");
        quoteCard.className = "bg-white/20 p-4 rounded-xl shadow-md text-center text-white mt-6";
        quoteCard.innerHTML = `
          <p class="italic text-lg">"${randomQuote.text}"</p>
          <p class="mt-2 text-sm text-white/80">â€” ${randomQuote.author}</p>
        `;
        resultsContainer.appendChild(quoteCard);

      } catch (error) {
        console.error(error);
      }
    }

    moodButtons.forEach(button => {
      button.addEventListener("click", () => showSongs(button.dataset.mood));
    });
  </script>

</body>
</html>
